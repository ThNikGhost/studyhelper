# Полный план разработки — StudyHelper

## Обзор фаз

| Фаза | Название | Основной функционал |
|------|----------|---------------------|
| 1 | MVP | Базовый функционал: расписание, работы, предметы |
| 2 | Расширение | Файлы, посещаемость, календарь, уведомления |
| 3 | Улучшения | Голосовой ввод, история, расписание преподавателей |
| 4 | Масштабирование | Виджеты, Telegram-бот, AI, интеграции |

---

## Фаза 1: MVP

**Цель:** Работающее приложение с базовым функционалом для 2 пользователей.

### Функционал
- Аутентификация (JWT, 2 пользователя)
- Расписание (автопарсинг каждые 6 часов)
- Предметы (CRUD, типы контроля)
- Учебные работы (CRUD, статусы, дедлайны, парный режим)
- Преподаватели (CRUD, контакты)
- Информация об университете (подразделения, корпуса)
- Одногруппники (CRUD, контакты, фото)
- Dashboard
- PWA (manifest, service worker)
- Адаптивный дизайн + тёмная тема

### Технические задачи
- Инфраструктура (Docker, CI/CD)
- База данных (PostgreSQL, миграции)
- API (FastAPI, OpenAPI docs)
- Frontend (React, Tailwind, shadcn/ui)

### Критерии завершения
- Все CRUD операции работают
- Парсинг расписания стабилен
- PWA устанавливается на телефон
- Тесты покрывают 80% кода

---

## Фаза 2: Расширение

**Цель:** Добавить продвинутый функционал для полноценного использования.

### Функционал
- **Push-уведомления**
  - Дедлайны (за 3 дня, 1 день, в день)
  - Изменения расписания
  - Утренняя сводка (8:00)

- **Файловое хранилище**
  - Загрузка файлов (до 50 MB)
  - Категории (методички, лекции, шпаргалки)
  - Привязка к предметам
  - Просмотр в браузере

- **Посещаемость**
  - Автоматическая отметка после пары
  - Ручная отметка пропусков
  - Статистика по предметам

- **Календарь**
  - Агрегация расписания и дедлайнов
  - Виды: день, неделя, месяц

- **Прогресс**
  - Визуализация по предметам
  - Общий прогресс семестра

- **Учебный план**
  - Управление семестрами
  - Переключение текущего семестра

### Технические задачи
- Celery для фоновых задач
- Web Push API
- Хранение файлов (локальное или S3)
- Расширение API

---

## Фаза 3: Улучшения

**Цель:** Улучшить UX и добавить продвинутые функции.

### Функционал
- **Голосовой ввод**
  - Web Speech API
  - Диктовка заметок и описаний

- **История изменений**
  - Логирование всех изменений
  - Возможность отката

- **Расписание преподавателей**
  - Парсинг по ID преподавателя
  - Ссылка из карточки преподавателя

### Технические задачи
- Интеграция Web Speech API
- Система версионирования данных
- Расширение парсера

---

## Фаза 4: Масштабирование

**Цель:** Интеграции и расширение за пределы PWA.

### Функционал
- **Виджеты для телефона**
  - Следующая пара
  - Ближайший дедлайн

- **Telegram-бот**
  - Уведомления
  - Быстрые команды
  - Статус работ

- **AI-агент**
  - Голосовые команды
  - Умные напоминания

- **Автоматический расчёт автомата**
  - Анализ требований
  - Рекомендации

- **Интеграции**
  - Google Calendar
  - Экспорт в iCal

- **Расширение аудитории**
  - Многопользовательский режим
  - Доменное имя
  - Публичный доступ

---

## Зависимости между фазами

```
Фаза 1 (MVP)
    │
    ├── Фаза 2 (Расширение)
    │       │
    │       ├── Push-уведомления ← зависит от: Auth, Works
    │       ├── Файлы ← зависит от: Subjects
    │       ├── Посещаемость ← зависит от: Schedule, Auth
    │       └── Календарь ← зависит от: Schedule, Works
    │
    └── Фаза 3 (Улучшения)
            │
            ├── Голосовой ввод ← зависит от: базовый UI
            └── Расписание препода ← зависит от: Schedule, Teachers
                    │
                    └── Фаза 4 (Масштабирование)
```

---

## Риски и митигация

| Риск | Фаза | Митигация |
|------|------|-----------|
| Изменение сайта расписания | 1-4 | Гибкий парсер, мониторинг, fallback на ручной ввод |
| Ограничения PWA на iOS | 1 | Тестирование, альтернативные решения |
| Сложность push на iOS | 2 | Использовать APNs через backend |
| Ограничения Web Speech API | 3 | Fallback на текстовый ввод |
| Сложность виджетов | 4 | Нативное приложение или сторонние решения |

---

## Метрики успеха

| Метрика | Фаза 1 | Фаза 2 | Фаза 3 | Фаза 4 |
|---------|--------|--------|--------|--------|
| Покрытие тестами | 80% | 80% | 80% | 80% |
| Lighthouse Score | 90+ | 90+ | 95+ | 95+ |
| API endpoints | ~30 | ~50 | ~55 | ~60 |
| Страниц | 12 | 15 | 16 | 18 |
